scenario %>% tolower() %>% trimws(),
"observé" = "obs",
"observée" = "obs",
"observations" = "obs",
"projetée" = "tous scénarios",
"1.7999999999999999e-2"="+1,8%/an",
"1.4999999999999999e-2"="+1,5%/an",
"1.2999999999999999e-2"="+1,3%/an",
"1.6e-2"="+1,6%/an",
"7.0000000000000001e-3"="+0,7%/an",
"0.016"="+1,6%/an",
"0.013"="+1,3%/an",
"0.007"="+0,7%/an",
"0.01"="+1%/an"
))
names(tab) <- recode(names(tab),"valeurs"=x)
return(tab)
})
x<-"txprelev"
tab <- extrait_opendata(intitulecourt=x,datepubli=y) %>%
select(-sexe,-geo) %>%
filter(!is.na(valeurs)) %>%
rename(scenario=x1)
x<-"partressourcespib"
tab <- extrait_opendata(intitulecourt=x,datepubli=y) %>%
select(-sexe,-geo) %>%
filter(!is.na(valeurs)) %>%
rename(scenario=x1)
View(tab)
x<-"partressourcespibconveec"
tab <- extrait_opendata(intitulecourt=x,datepubli=y) %>%
select(-sexe,-geo) %>%
filter(!is.na(valeurs)) %>%
rename(scenario=x1)
tab <- extrait_opendata(intitulecourt=x,datepubli=y) %>%
select(-sexe,-geo)
intitulecourt=x
datepubli=y
intitulecourtloc <- intitulecourt
if (!is.null(intitule)) {
intituleloc <- recode(enc2utf8(intitule),
"taux de retraités" = "taux de retraités par âge",
"txretr" = "taux de retraités par âge",
"taux de nouveaux retraités" = "taux de nouveaux retraités par âge",
"tauxnouvretr" = "taux de nouveaux retraités par âge")
if (!(intituleloc %in% sources_opendata$intitule)) {warning(paste0("Intitulé '",intituleloc,"' non retrouvé"))}
}
datepubliloc <- datepubli
champ_sexeloc <- champ_sexe
champ_geoloc <- champ_geo
champ_autreloc <- champ_autre
if (!is.null(intitulecourt)) { donnees <- sources_opendata %>% filter(intitulecourt==intitulecourtloc)
} else { donnees <- sources_opendata %>% filter(intitule==intituleloc) }
if (!is.na(datepubliloc)) {donnees <- donnees %>% filter(datepubli==datepubliloc)}
if (!is.na(champ_sexeloc)) {donnees <- donnees %>% filter(champ_sexe==champ_sexeloc)}
if (!is.na(champ_geoloc)) {donnees <- donnees %>% filter(champ_geo==champ_geoloc)}
if (!is.na(champ_autreloc)) {donnees <- donnees %>% filter(champ_autre==champ_autreloc)}
(nrow(donnees)>1)
intitulecourt
if (!(length(donnees$zone)==1L)) {warning(paste("Problème rencontré pour la série ",donnees$intitulecourt))}
rangecells <- cellranger::as.cell_limits(donnees$zone)
vals <- read.xlsx(
xlsxFile = donnees$url,
sheet = donnees$onglet,
rows = c(rangecells$ul[1]:rangecells$lr[1]),
cols = c(rangecells$ul[2]:rangecells$lr[2]),
colNames = TRUE, rowNames = FALSE
) %>%
janitor::clean_names()
View(vals)
names(vals)[1] <- "x1"
(!(is.na(donnees$complzone)))
names(vals)[2] <- "x2"
View(vals)
vals <- vals %>% mutate(x1= if_else((is.na(x1) | x1=="") & grepl("obs",tolower(x2)),x2,x1))
View(vals)
tolower(NA)
grepl("obs",tolower(NA))
vals <- vals %>% mutate(x1= if_else((is.na(x1) | x1=="") & grepl("obs",tolower(x2)),x2,x1))
vals <- vals %>% mutate(x1= if_else((is.na(x1) | x1=="") & grepl("obs",tolower(as.character(x2))),x2,x1))
vals <- vals %>% mutate(x1= if_else((is.na(x1) | x1=="") & grepl("obs",tolower(as.character(x2))),as.character(x2),x1))
vals <- vals %>% mutate(x1=as.character(x1))
vals <- vals %>%
mutate(x2 = as.character(x2),
x1= if_else((is.na(x1) | x1=="") & grepl("obs",tolower(x2)),x2,x1))
vals <- vals %>%
mutate(x1= if_else(is.na(x1) | x1=="",x2,x1),
x1=factor(x1,levels=unique(vals$x1)) %>% as.numeric() ) %>%
fill(x1,.direction="downup") %>%
filter(x1==donnees$complzone) %>%
select(-x1) %>%
rename(x1=x2)
View(vals)
load_all()
# extraction de tous les noms des séries de données tirées du rapport du COR
indiccor <- sources_opendata %>%
filter(producteur=="COR",reference=="rapport annuel") %>%
select(intitulecourt,datepubli)
# extraction de toutes les séries
tabindics <- map2(indiccor$intitulecourt,indiccor$datepubli,
function(x,y){
tab <- extrait_opendata(intitulecourt=x,datepubli=y) %>%
select(-sexe,-geo) %>%
filter(!is.na(valeurs)) %>%
rename(scenario=x1) %>%
mutate(scenario = recode(
scenario %>% tolower() %>% trimws(),
"observé" = "obs",
"observée" = "obs",
"observations" = "obs",
"projetée" = "tous scénarios",
"1.7999999999999999e-2"="+1,8%/an",
"1.4999999999999999e-2"="+1,5%/an",
"1.2999999999999999e-2"="+1,3%/an",
"1.6e-2"="+1,6%/an",
"7.0000000000000001e-3"="+0,7%/an",
"0.016"="+1,6%/an",
"0.013"="+1,3%/an",
"0.007"="+0,7%/an",
"0.01"="+1%/an"
))
names(tab) <- recode(names(tab),"valeurs"=x)
return(tab)
})
tablong <- do.call("bind_rows",tabindics) %>%
# correction à la main ...
mutate(scenario = if_else(is.na(scenario) & !is.na(x2),x2,scenario) %>%
recode("Obs" = "obs")) %>%
select(-x2) %>%
# mise en forme longue
pivot_longer(cols=-c("scenario","annee","datepubli"),names_to="serie",values_to="val") %>%
filter(!is.na(val))
unique(tablong$scenario )
tablong <- bind_rows(
tablong %>% filter(serie!="partsalva" | scenario=="obs"),
tablong %>% filter(serie=="partsalva" & scenario!="obs") %>%
group_by(datepubli) %>% filter(annee<max(annee)) %>% ungroup(),
tablong %>% filter(serie=="partsalva" & scenario!="obs") %>%
group_by(datepubli) %>%
filter(annee==max(annee)) %>%
slice(rep(1:n(),each=2070-annee+1)) %>%
mutate(annee=c(min(annee):2070)) %>%
ungroup()
) %>%
arrange(datepubli,serie,scenario,annee)
# identification des séries pour lesquelles les valeurs en projection sont identiques dans tous les scénarios
nbseriesscunique <- (tablong %>%
filter(scenario!="obs")  %>%
select(scenario,serie,datepubli) %>%
distinct() %>%
group_by(serie,datepubli) %>% summarize(nbsc=n()) %>% ungroup() %>%
filter(nbsc<4) %>%
select(-nbsc))
# duplication des projections en "tous scénarios" pour chacun des scénarios de projection
scenariosproj <- tablong %>% filter(!(scenario %in% c("obs","tous scénarios"))) %>%
select(datepubli,scenario) %>% distinct() %>%
rename(datepublisc=datepubli)
tablong <- bind_rows(
tablong %>% filter(scenario=="obs"),
tablong %>% filter(scenario!="obs") %>%
anti_join(nbseriesscunique, by=c("datepubli","serie")),
tablong %>% filter(scenario!="obs") %>%
inner_join(nbseriesscunique, by=c("datepubli","serie")) %>%
group_by(serie,datepubli,annee) %>%
slice(rep(1:n(),each=4) ) %>%
mutate(scenario = (scenariosproj %>% filter(datepublisc==min(datepubli)))$scenario ) %>%
ungroup()
)
# création de la table complète
#for (i in c(1:length(tabindics))) {
#  if (i==1) {projcor  <- tabindics[[i]]}
#  else if ((i>1) & !(indiccor[i] %in% c(nbseriesscunique))) {projcor <- projcor %>% left_join(tabindics[[i]],by=c("scenario","annee","datepubli"))}
#  else if ((i>1) & (indiccor[i] %in% c(nbseriesscunique))) {projcor <- projcor %>% left_join(tabindics[[i]] %>% select(-scenario) %>% distinct(),by=c("annee","datepubli"))}
#}
projcor <- tablong %>%
pivot_wider(id_cols=c("datepubli","scenario","annee"),
names_from="serie",values_from="val") %>%
mutate(txprelevconvepr = if_else(
is.na(txprelevconvepr) & (scenario=="obs"),txprelev,txprelevconvepr),
txprelevconveec = if_else(
is.na(txprelevconveec) & (scenario=="obs"),txprelev,txprelevconveec),
partressourcespibconvepr = if_else(
is.na(partressourcespibconvepr) & (scenario=="obs"),partressourcespib,partressourcespibconvepr),
partressourcespibconveec = if_else(
is.na(partressourcespibconveec) & (scenario=="obs"),partressourcespib,partressourcespibconveec) )
View(projcor)
projcor <- tablong %>%
pivot_wider(id_cols=c("datepubli","scenario","annee"),
names_from="serie",values_from="val") %>%
mutate(txprelevconvepr = if_else(
is.na(txprelevconvepr) & (scenario=="obs"),txprelev,txprelevconvepr),
txprelevconveec = if_else(
is.na(txprelevconveec) & (scenario=="obs"),txprelev,txprelevconveec),
partressourcespibconvepr = if_else(
is.na(partressourcespibconvepr) & (scenario=="obs"),partressourcespib,partressourcespibconvepr),
partressourcespibconveec = if_else(
is.na(partressourcespibconveec) & (scenario=="obs"),partressourcespib,partressourcespibconveec) ) %>%
arrange(datepubli,scenario,annee)
View(projcor)
usethis::use_data(projcor, overwrite=TRUE)
document()
build_site()
library(devtools)
load_all()
View(dossiers_en_bref_cor)
names(dossiers_en_bref_cor)
View(seances_cor)
names(seances_cor)
nrow(seances_cor)
nrow(dossiers_en_bref_cor)
View(docs_cor)
nrow(docs_cor)
names(docs_cor)
ncols(docs_cor)
ncol(docs_cor)
freq(docs_cor$type)
unique(docs_cor$type)
document()
library(devtools)
load_all()
truc <- extrait_opendata("bidule")
library(tidyverse)
truc <- extrait_opendata("bidule")
truc <- extrait_opendata("taux de retraités")
View(truc)
intitulecourt = NULL
datepubli = NA
champ_sexe = NA
champ_sexe = NA
champ_sexe = NA
champ_geo = NA
champ_autre = NA
intitule <- "taux de retraités"
intitulecourtloc <- intitulecourt
if (!is.null(intitule)) {
intituleloc <- recode(enc2utf8(intitule),
"taux de retraités" = "taux de retraités par âge",
"txretr" = "taux de retraités par âge",
"taux de nouveaux retraités" = "taux de nouveaux retraités par âge",
"tauxnouvretr" = "taux de nouveaux retraités par âge")
if (!(intituleloc %in% sources_opendata$intitule)) {warning(paste0("Intitulé '",intituleloc,"' non retrouvé"))}
}
datepubliloc <- datepubli
champ_sexeloc <- champ_sexe
champ_geoloc <- champ_geo
champ_autreloc <- champ_autre
# == extraction des données
if (!is.null(intitulecourt)) { donnees <- sources_opendata %>% filter(intitulecourt==intitulecourtloc)
} else { donnees <- sources_opendata %>% filter(intitule==intituleloc) }
if (!is.na(datepubliloc)) {donnees <- donnees %>% filter(datepubli==datepubliloc)}
if (!is.na(champ_sexeloc)) {donnees <- donnees %>% filter(champ_sexe==champ_sexeloc)}
if (!is.na(champ_geoloc)) {donnees <- donnees %>% filter(champ_geo==champ_geoloc)}
if (!is.na(champ_autreloc)) {donnees <- donnees %>% filter(champ_autre==champ_autreloc)}
if (nrow(donnees)>1) {
vals <- do.call(
"bind_rows",
lapply(c(1:nrow(donnees)),
function(i){extrait_opendata(donnees[i,]$intitule,donnees[i,]$intitulecourt,donnees[i,]$datepubli,donnees[i,]$champ_sexe,donnees[i,]$champ_geo,donnees[i,]$champ_autre)})
)
} else {
if (!(length(donnees$zone)==1L)) {warning(paste("Problème rencontré pour la série ",donnees$intitulecourt))}
rangecells <- cellranger::as.cell_limits(donnees$zone)
vals <- read.xlsx(
xlsxFile = donnees$url,
sheet = donnees$onglet,
rows = c(rangecells$ul[1]:rangecells$lr[1]),
cols = c(rangecells$ul[2]:rangecells$lr[2]),
colNames = TRUE, rowNames = FALSE
) %>%
janitor::clean_names()
}
View(vals)
View(vals)
nrow(donnees)
donnees <- donnees[1,]
nrow(donnees)
if (!(length(donnees$zone)==1L)) {warning(paste("Problème rencontré pour la série ",donnees$intitulecourt))}
rangecells <- cellranger::as.cell_limits(donnees$zone)
vals <- read.xlsx(
xlsxFile = donnees$url,
sheet = donnees$onglet,
rows = c(rangecells$ul[1]:rangecells$lr[1]),
cols = c(rangecells$ul[2]:rangecells$lr[2]),
colNames = TRUE, rowNames = FALSE
) %>%
janitor::clean_names()
View(vals)
nomcol1 <- names(vals)[1]
names(vals)[1] <- "x1"
vals <- vals %>% mutate(x1=as.character(x1))
intitule <- "pension moyenne relative"
datepubli <- "2022-09-15"
intitulecourtloc <- intitulecourt
if (!is.null(intitule)) {
intituleloc <- recode(enc2utf8(intitule),
"taux de retraités" = "taux de retraités par âge",
"txretr" = "taux de retraités par âge",
"taux de nouveaux retraités" = "taux de nouveaux retraités par âge",
"tauxnouvretr" = "taux de nouveaux retraités par âge")
if (!(intituleloc %in% sources_opendata$intitule)) {warning(paste0("Intitulé '",intituleloc,"' non retrouvé"))}
}
datepubliloc <- datepubli
champ_sexeloc <- champ_sexe
champ_geoloc <- champ_geo
champ_autreloc <- champ_autre
# == extraction des données
if (!is.null(intitulecourt)) { donnees <- sources_opendata %>% filter(intitulecourt==intitulecourtloc)
} else { donnees <- sources_opendata %>% filter(intitule==intituleloc) }
if (!is.na(datepubliloc)) {donnees <- donnees %>% filter(datepubli==datepubliloc)}
if (!is.na(champ_sexeloc)) {donnees <- donnees %>% filter(champ_sexe==champ_sexeloc)}
if (!is.na(champ_geoloc)) {donnees <- donnees %>% filter(champ_geo==champ_geoloc)}
if (!is.na(champ_autreloc)) {donnees <- donnees %>% filter(champ_autre==champ_autreloc)}
nrow(donnees)
if (!(length(donnees$zone)==1L)) {warning(paste("Problème rencontré pour la série ",donnees$intitulecourt))}
rangecells <- cellranger::as.cell_limits(donnees$zone)
vals <- read.xlsx(
xlsxFile = donnees$url,
sheet = donnees$onglet,
rows = c(rangecells$ul[1]:rangecells$lr[1]),
cols = c(rangecells$ul[2]:rangecells$lr[2]),
colNames = TRUE, rowNames = FALSE
) %>%
janitor::clean_names()
View(vals)
length(donnees$zone)
is.na(donnees$complzone)
intitule <-"ressources de retraite en pct du pib (convention EEC)"
intitulecourtloc <- intitulecourt
if (!is.null(intitule)) {
intituleloc <- recode(enc2utf8(intitule),
"taux de retraités" = "taux de retraités par âge",
"txretr" = "taux de retraités par âge",
"taux de nouveaux retraités" = "taux de nouveaux retraités par âge",
"tauxnouvretr" = "taux de nouveaux retraités par âge")
if (!(intituleloc %in% sources_opendata$intitule)) {warning(paste0("Intitulé '",intituleloc,"' non retrouvé"))}
}
datepubliloc <- datepubli
champ_sexeloc <- champ_sexe
champ_geoloc <- champ_geo
champ_autreloc <- champ_autre
# == extraction des données
if (!is.null(intitulecourt)) { donnees <- sources_opendata %>% filter(intitulecourt==intitulecourtloc)
} else { donnees <- sources_opendata %>% filter(intitule==intituleloc) }
if (!is.na(datepubliloc)) {donnees <- donnees %>% filter(datepubli==datepubliloc)}
if (!is.na(champ_sexeloc)) {donnees <- donnees %>% filter(champ_sexe==champ_sexeloc)}
if (!is.na(champ_geoloc)) {donnees <- donnees %>% filter(champ_geo==champ_geoloc)}
if (!is.na(champ_autreloc)) {donnees <- donnees %>% filter(champ_autre==champ_autreloc)}
nrow(donnees)
if (!(length(donnees$zone)==1L)) {warning(paste("Problème rencontré pour la série ",donnees$intitulecourt))}
rangecells <- cellranger::as.cell_limits(donnees$zone)
vals <- read.xlsx(
xlsxFile = donnees$url,
sheet = donnees$onglet,
rows = c(rangecells$ul[1]:rangecells$lr[1]),
cols = c(rangecells$ul[2]:rangecells$lr[2]),
colNames = TRUE, rowNames = FALSE
) %>%
janitor::clean_names()
View(vals)
load_all()
truc <- extrait_opendata("taux de retraités")
load_all()
truc <- extrait_opendata("taux de retraités")
View(truc)
truc <- extrait_opendata("taux de nouveaux retraités par âge")
View(truc)
truc <- extrait_opendata("fancyseries")
intitule <- "autre serie"
intitulecourtloc <- intitulecourt
if (!is.null(intitule)) {
intituleloc <- recode(enc2utf8(intitule),
"taux de retraités" = "taux de retraités par âge",
"txretr" = "taux de retraités par âge",
"taux de nouveaux retraités" = "taux de nouveaux retraités par âge",
"tauxnouvretr" = "taux de nouveaux retraités par âge")
if (!(intituleloc %in% sources_opendata$intitule)) {warning(paste0("Intitulé '",intituleloc,"' non retrouvé"))}
}
datepubliloc <- datepubli
champ_sexeloc <- champ_sexe
champ_geoloc <- champ_geo
champ_autreloc <- champ_autre
# == extraction des données
if (!is.null(intitulecourt)) { donnees <- sources_opendata %>% filter(intitulecourt==intitulecourtloc)
} else { donnees <- sources_opendata %>% filter(intitule==intituleloc) }
if (!is.na(datepubliloc)) {donnees <- donnees %>% filter(datepubli==datepubliloc)}
if (!is.na(champ_sexeloc)) {donnees <- donnees %>% filter(champ_sexe==champ_sexeloc)}
if (!is.na(champ_geoloc)) {donnees <- donnees %>% filter(champ_geo==champ_geoloc)}
if (!is.na(champ_autreloc)) {donnees <- donnees %>% filter(champ_autre==champ_autreloc)}
nrow(donnees)
load_all()
intitule <- "autre serie"
truc <- extrait_opendata("fancyseries")
load_all()
truc <- extrait_opendata("fancyseries")
load_all()
truc <- extrait_opendata("fancyseries")
load_all()
truc <- extrait_opendata("fancyseries")
intituleloc
paste(
paste0("Intitulé '",intituleloc,"' non retrouvé.\nLes séries disponibles sont : "),
unique(sources_opendata$intitule),collapse=" ; ")
paste0(
"Intitulé '",intituleloc,"' non retrouvé.\nLes séries disponibles sont : ",
paste(unique(sources_opendata$intitule),collapse=" ; ") )    )
paste(unique(sources_opendata$intitule),collapse=" ; ")
paste0(
"Intitulé '",intituleloc,"' non retrouvé.\nLes séries disponibles sont : ",
paste(unique(sources_opendata$intitule),collapse=" ; ") )
paste0(
"Intitulé '",intituleloc,"' non retrouvé. Les séries disponibles sont : ",
paste(unique(sources_opendata$intitule)) )
paste0(
"Intitulé '",intituleloc,"' non retrouvé. Les séries disponibles sont : ",
paste(unique(sources_opendata$intitule)),collapse=" ; " )
paste0(
"Intitulé '",intituleloc,"' non retrouvé. Les séries disponibles sont : ",
paste(unique(sources_opendata$intitule),collapse=" ; ")  )
load_all()
truc <- extrait_opendata("serie bidule")
load_all()
truc <- extrait_opendata("les droits validés en cours de carriere (EIC 2017)")
truc <- extrait_opendata("les droits validés en cours de carrière (EIC 2017)")
truc <- extrait_opendata("les droits validés en cours de carrière (EIC 2017)")
load_all()
sources_opendata <- read.csv2("data-raw/sources_open_data.csv", encoding="UTF-8")
usethis::use_data(sources_opendata, overwrite=TRUE)
load_all()
truc <- extrait_opendata("les droits validés en cours de carrière (EIC 2017)")
intitule<-"les droits validés en cours de carrière (EIC 2017)"
intitulecourtloc <- intitulecourt
if (!is.null(intitule)) {
intituleloc <- recode(enc2utf8(intitule),
"taux de retraités" = "taux de retraités par âge",
"txretr" = "taux de retraités par âge",
"taux de nouveaux retraités" = "taux de nouveaux retraités par âge",
"tauxnouvretr" = "taux de nouveaux retraités par âge")
if (!(intituleloc %in% sources_opendata$intitule)) {
stop( paste0(
"Intitulé '",intituleloc,"' non retrouvé. Les séries disponibles sont : ",
paste(unique(sources_opendata$intitule),collapse=" ; ")  )    )
}
}
datepubliloc <- datepubli
champ_sexeloc <- champ_sexe
champ_geoloc <- champ_geo
champ_autreloc <- champ_autre
if (!is.null(intitulecourt)) { donnees <- sources_opendata %>% filter(intitulecourt==intitulecourtloc)
} else { donnees <- sources_opendata %>% filter(intitule==intituleloc) }
if (!is.na(datepubliloc)) {donnees <- donnees %>% filter(datepubli==datepubliloc)}
if (!is.na(champ_sexeloc)) {donnees <- donnees %>% filter(champ_sexe==champ_sexeloc)}
if (!is.na(champ_geoloc)) {donnees <- donnees %>% filter(champ_geo==champ_geoloc)}
if (!is.na(champ_autreloc)) {donnees <- donnees %>% filter(champ_autre==champ_autreloc)}
nrow(donnees)
(!(intituleloc %in% sources_opendata$intitule))
intitulecourt
intituleloc
if (!is.null(intitulecourt)) { donnees <- sources_opendata %>% filter(intitulecourt==intitulecourtloc)
} else { donnees <- sources_opendata %>% filter(intitule==intituleloc) }
View(donnees)
datepubli = NA
champ_sexe = NA
champ_geo = NA
champ_autre = NA
intitulecourtloc <- intitulecourt
if (!is.null(intitule)) {
intituleloc <- recode(enc2utf8(intitule),
"taux de retraités" = "taux de retraités par âge",
"txretr" = "taux de retraités par âge",
"taux de nouveaux retraités" = "taux de nouveaux retraités par âge",
"tauxnouvretr" = "taux de nouveaux retraités par âge")
if (!(intituleloc %in% sources_opendata$intitule)) {
stop( paste0(
"Intitulé '",intituleloc,"' non retrouvé. Les séries disponibles sont : ",
paste(unique(sources_opendata$intitule),collapse=" ; ")  )    )
}
}
datepubliloc <- datepubli
champ_sexeloc <- champ_sexe
champ_geoloc <- champ_geo
champ_autreloc <- champ_autre
# == extraction des données
if (!is.null(intitulecourt)) { donnees <- sources_opendata %>% filter(intitulecourt==intitulecourtloc)
} else { donnees <- sources_opendata %>% filter(intitule==intituleloc) }
if (!is.na(datepubliloc)) {donnees <- donnees %>% filter(datepubli==datepubliloc)}
if (!is.na(champ_sexeloc)) {donnees <- donnees %>% filter(champ_sexe==champ_sexeloc)}
if (!is.na(champ_geoloc)) {donnees <- donnees %>% filter(champ_geo==champ_geoloc)}
if (!is.na(champ_autreloc)) {donnees <- donnees %>% filter(champ_autre==champ_autreloc)}
(nrow(donnees)>1)
(grepl("csv$",donnees$url))
donnees$url
(grepl("csv(/|)$",donnees$url))
vals <- read.csv2(file==donnees$url,
header=TRUE,sep=";")
vals <- read.csv2(file=donnees$url,
header=TRUE,sep=";")
View(vals)
load_all()
truc <- extrait_opendata("les droits validés en cours de carrière (EIC 2017)")
View(truc)
View(projcor)
library(devtools)
load_all()
check()
document()
build()
document()
check()
build()
load_all()
library(devtools)
load_all()
